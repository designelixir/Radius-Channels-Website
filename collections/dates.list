<script>
	function toggleEvent(targetDiv){
	  var target = targetDiv + '-fullpage-event';
	  var targetSummary = targetDiv + '-summary';
	  var targetDiv = document.getElementById(target);

    var targetArrowDiv = targetDiv + '-summary-arrow';
    var targetArrow = document.getElementById(targetArrowDiv)

	  var allDivs = document.getElementsByClassName('active-event')
	  var allSummaryDivs = document.getElementsByClassName('events-summary-container')
    

	  for (i=0; i < allDivs.length; i++){
	      
	      allDivs[i].classList.remove('active-event')
        
	      
	  }
    for (i=0; i < allSummaryDivs.length; i++){
      
      allSummaryDivs[i].classList.remove('selected-event')
    }
	    targetDiv.classList.add('active-event')
	    document.getElementById(targetSummary).classList.add('selected-event');
      
	}
</script>

<header class="site-header">
        <squarespace:navigation navigationId="siteNav" template="site-navigation" />        
      </header>
      <div id='site-wrapper'>
      {.section website}
        <div {.if collection.mainImage} style="background-image: url({collection.mainImage.assetUrl})" class="user-set-bg page-header"{.or} class="page-header" {.end}>
          <div class="page-header-content">
            <div>
              <h1 class="site-title-heading" data-content-field="site-title" {.if collection.mainImage} style="color: white" {.end}>
                {collection.title}
              </h1>
              <br>
              <squarespace:block-field id="{squarespace.page-id}-text" columns="12"/>
            </div>
          </div>
        </div>
        {.end}

<div class="content-container">
<h2>Upcoming Events </h2>


         
<div class="events flex-start-start">

  <div class="events-summary-list" style="width: 40%;">
{.repeated section items}
  <div class="flex-center-center events-summary-container" id="{title}-summary" style="border: 0.25px solid black">
		<div class="events-summary"  onclick="toggleEvent(`{title}`)" >
			
			<div class="events-summary-wrapper flex-center-center">
				<div class="event-summary-info">

					<div class="event-summary-wrapper flex-start-start">
						
            
     
            <div class="event-summary-title">
              <p>{structuredContent.startDate|date %B %d, %Y}</p>
              <h3 class="strong hover">{title}</h3>
              <div class="excerpt">
                <p id="trimmed-excerpt"><script>document.getElementById('trimmed-excerpt').innerHTML = `{excerpt}`.substring(0, 115) + ' ... <br> <i> Click to read more</i>'</script></p>
              </div>
              <div class="flex-start-start">
              {.repeated section tags}
              <p class="tag">{@}</p>{.alternates with}&nbsp;
            {.end}
            {.if customContent.eventType}
            &nbsp;<p class="tag">Virtual Event</p>
            {.or}
            <p class="tag">In-Person Event</p>
            {.end}
            </div>
            </div>

				  </div>

         

			  </div>
      </div>

    </div>
    <div class="flex-center-center selector-arrow">
      <img src="../assets/blue-arrow.png"  style="width: 100%">
    </div>
  </div>

{.end}	
  </div>

  <div class="events-full-size" style="width: 60%;">
{.repeated section items}
	<div class="full-size-event hidden-event" id="{title}-fullpage-event">
		<div class="full-size-event-header-wrapper">
			<div class="full-size-event-header" {.if assetUrl} style="background-image: url({assetUrl});" {.or} style="background-image: url('../assets/event-bg.png');"{.end}>
		</div>
		<div class="full-size-event-header-title box-shadow">
			{.if customContent.eventType}
			<p>Virtual Event</p>
			{.or}
			<p>In-Person Event</p>
			{.end}
			<h2 class="hover" onclick="window.open('{fullUrl}')">{title}</h2>
			<h3 style="color: var(--lightblue)">{structuredContent.startDate|date %B %d, %Y %I:%M %p} - {structuredContent.endDate|date %B %d, %Y %I:%M %p }</h3>
      <p>{customContent.eventTimeZone}</p>
		</div>
	</div>
	<div class="basic-padding">
		<p>{excerpt}</p>
		<p>{body}</p>
		{.if sourceUrl}
		<button class="solid-button" onclick="window.open('{sourceUrl}')">Register Now</button>
		{.or}
		<button class="solid-button" onclick="window.open('{fullUrl}')">Register Now</button>
		{.end}
	</div>
</div>
{.end}
  </div>


</div>
</div>
</div>
<script>

var eventsSummaryDivs = document.getElementsByClassName('events-summary-container')
console.log(eventsSummaryDivs.length)
const firstChild = eventsSummaryDivs[0]
const firstChildId = firstChild.id;
const substringToRemove = '-summary';
const modifiedString = firstChildId.replace(substringToRemove, '');
console.log(modifiedString)
toggleEvent(modifiedString)
</script>