<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    {squarespace-headers}
  </head>
  <script>
	function isDateInFutureOrPast(start, end, id) {
	  const today = new Date();
	  console.log(id)
    var targetParentId = document.getElementById(String(id))
	  var targetId = document.getElementById('eventType-' + String(id))
    
	  const startDate = new Date(start)
	  const endDate = new Date(end)
	  console.log(start,  end)
	  
	
	
	  if (startDate > today) {
	    
      
      targetParentId.classList.add('future-event')
	  } else if (startDate < today && endDate > today){
      targetParentId.classList.add('future-event')
	  } else if (startDate < today) {
	    targetId.innerHTML = "Archived Event"
      targetParentId.classList.add('archived-event')
	  }  else {
	    console.log("no event defined")
	  }
	}
	
	function toggleTypes(toggleType){
	  var typeToggles = document.getElementsByClassName('type-toggle'); 
    var futureEvents = document.getElementsByClassName('future-event')
    var archivedEvents = document.getElementsByClassName('archived-event')
    var allContentDivs = document.getElementsByClassName('events-summary-container')
	  for (var i = 0; i < typeToggles.length; i++){
	    typeToggles[i].classList.remove('active-type-toggle')
	  }
	  document.getElementById(toggleType).classList.add('active-type-toggle')

    for (var i = 0; i < allContentDivs.length; i++){
      allContentDivs[i].classList.remove('visible-event', 'active-event')
    }
    if (toggleType === 'upcoming-toggle'){
      toggleEvent(futureEvents[0].id, futureEvents[0].dataset.fullUrl)
      for (var i = 0; i < futureEvents.length; i++){
      futureEvents[i].classList.add('visible-event')
    }
    } else {
      toggleEvent(archivedEvents[0].id, archivedEvents[0].dataset.fullUrl)
      for (var i = 0; i < archivedEvents.length; i++){
      archivedEvents[i].classList.add('visible-event')
    }
    }
	}
	
		function toggleEvent(target, fullUrl){
	    var targetIframe = document.getElementById('target-iframe');
	    var targetUrl = "https://radiuschannels2.squarespace.com" + String(fullUrl)
		  var targetDiv = document.getElementById(target);
		  var allDivs = document.getElementsByClassName('active-event')
	    
	
		  for (i=0; i < allDivs.length; i++){
		      allDivs[i].classList.remove('active-event')
		  }
	
		    targetDiv.classList.add('active-event')
	      targetIframe.src = targetUrl
	      
		}
</script>
  <body id="{squarespace.page-id}" class="{squarespace.page-classes}">
<header class="site-header">
        <squarespace:navigation navigationId="siteNav" template="site-navigation" />        
      </header>
      {.section website}
        <div {.if collection.mainImage} style="background-image: url({collection.mainImage.assetUrl})" class="user-set-bg page-header"{.or} class="page-header" {.end}>
          <div class="page-header-content">
            <div>
              <h1 class="site-title-heading" data-content-field="site-title" {.if collection.mainImage} style="color: white" {.end}>
                {collection.title}
                {.if item.title}<span id="subcollectionTitle" style="color: var(--orange)"> | {item.title}</span>{.end}
              </h1>
              {.if item.title}
              <a href="{collection.fullUrl}" style="color: white;">&larr; Back to {collection.title}</a>
              {.end}
              <br>
              <squarespace:block-field id="{squarespace.page-id}-text" columns="12"/>
            </div>
          </div>
        </div>
        {.end}
      <div id='site-wrapper'>
      <squarespace:query collection="events2" limit="10"><div class="content-container">
	<div class="flex-start-start event-type-toggles">
		<h2 id="upcoming-toggle" class="active-type-toggle type-toggle" onclick="toggleTypes('upcoming-toggle')">Upcoming Events </h2>
		<h2>&nbsp;/&nbsp; </h2>
		<h2 id="archive-toggle" class="type-toggle" onclick="toggleTypes('archive-toggle')">Archived Events </h2>
	</div>
	<div class="events flex-start-start">
		<div class="events-summary-list" style="width: 40%; height: 900px; overflow-y: scroll;">
			{.repeated section items}
			<div class="flex-center-center events-summary-container"  id="{id}" data-full-url="{fullUrl}" style="border: 0.25px solid black">
				<div class="events-summary" onclick="toggleEvent('{id}', '{fullUrl}')"  >
					<div class="events-summary-wrapper flex-center-center">
						<div class="event-summary-info">
							<div class="event-summary-wrapper flex-start-start">
								<div class="event-summary-title">
                  <p id="eventType-{id}"></p>
									<p>{structuredContent.startDate|date %B %d, %Y}</p>
									<h3 class="strong hover">{title}</h3>
									<div class="excerpt">
										<p id="trimmed-excerpt">{excerpt|truncate 220}</p>
									</div>
									<div class="flex-start-start">
										{.repeated section tags}
										<p class="tag">{@}</p>
										{.alternates with}&nbsp;
										{.end}
										{.if customContent.eventType}
										&nbsp;
										<p class="tag">Virtual Event</p>
										{.or}
										<p class="tag">In-Person Event</p>
										{.end}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<script>isDateInFutureOrPast(`{structuredContent.startDate|date %Y-%m-%dT%T}`, `{structuredContent.endDate|date %Y-%m-%dT%T}`, '{id}')</script>
			{.end}	
		</div>
		<div class="events-full-size" style="width: 60%;">
			<div class="full-size-event" id="full-size-iframe">
				<iframe id="target-iframe" width="100%" height="900px"></iframe>	
			</div>
		</div>
	</div>
</div>

    </squarespace:query>

     
      
    

    <!-- combo and minify scripts when not logged in -->
    <squarespace:script src="site.js" combo="{.if authenticatedAccount}false{.or}true{.end}" />

    <!-- other scripts, and footer code injection -->
    {squarespace-footers}
<script>
toggleTypes('upcoming-toggle')
</script>
  </body>
</html>

